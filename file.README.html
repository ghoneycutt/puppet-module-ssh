<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>
  File: README
  
    &mdash; Documentation by YARD 0.9.36
  
</title>

  <link rel="stylesheet" href="css/style.css" type="text/css" />

  <link rel="stylesheet" href="css/common.css" type="text/css" />

<script type="text/javascript">
  pathId = "";
  relpath = '';
</script>


  <script type="text/javascript" charset="utf-8" src="js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="js/app.js"></script>


  </head>
  <body>
    <div class="nav_wrap">
      <iframe id="nav" src="file_list.html?1"></iframe>
      <div id="resizer"></div>
    </div>

    <div id="main" tabindex="-1">
      <div id="header">
        <div id="menu">
  
    <a href="_index.html">Index</a> &raquo; 
    <span class="title">File: README</span>
  
</div>

        <div id="search">
  
    <a class="full_list_link" id="puppet_class_list_link"
        href="puppet_class_list.html">

        <svg width="24" height="24">
          <rect x="0" y="4" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="12" width="24" height="4" rx="1" ry="1"></rect>
          <rect x="0" y="20" width="24" height="4" rx="1" ry="1"></rect>
        </svg>
    </a>
  
</div>
        <div class="clear"></div>
      </div>

      <div id="content"><div id='filecontents'>
<h1 id="label-puppet-module-ssh">puppet-module-ssh</h1>

<p>Manage ssh client and server.</p>

<p>This module is based on the OpenSSH v7.0 implementation. All parameters that are described in the man pages are available to this module with the exception of the Match parameter. Some SSH implementations do provide extra features and use additional parameters. These deviations can still be managed with the help of the <code>$custom</code> parameter. This freetext parameter allows you to add any lines to ssh_config and sshd_config that you wish to.</p>

<p>This module may be used with a simple <code>include ::ssh</code></p>

<p>The <code>ssh::config_entry</code> defined type may be used directly and is used to manage Host entries in a personal <code>~/.ssh/config</code> file.</p>

<h4 id="label-Table+of+Contents">Table of Contents</h4>
<ol><li>
<p><a href="#compatibility">Compatibility</a></p>
</li><li>
<p><a href="#parameters">Parameters</a></p>
</li><li>
<p><a href="#sample-usage">Examples</a></p>
</li><li>
<p><a href="#upgrading">Upgrading</a></p>
</li><li>
<p><a href="#contributing">Contributing</a></p>
</li></ol>

<h2 id="label-Compatibility">Compatibility</h2>

<p>This module officially supports the platforms listed in the <code>metadata.json</code>. It does not fail on unsupported platforms and has been known to work on many, many platforms since its creation in 2010.</p>

<h3 id="label-Known+to+work">Known to work</h3>
<ul><li>
<p>Archlinux</p>
</li><li>
<p>Debian 10</p>
</li><li>
<p>Debian 11</p>
</li><li>
<p>Debian 12</p>
</li><li>
<p>EL 7</p>
</li><li>
<p>EL 8</p>
</li><li>
<p>EL 9</p>
</li><li>
<p>Ubuntu 18.04 LTS</p>
</li><li>
<p>Ubuntu 20.04 LTS</p>
</li><li>
<p>Ubuntu 22.04 LTS</p>
</li><li>
<p>Ubuntu 24.04 LTS</p>
</li><li>
<p>Solaris 10</p>
</li><li>
<p>Solaris 11</p>
</li></ul>

<h3 id="label-SunSSH">SunSSH</h3>

<p>If you use the Sun Solaris SSH, please keep in mind that not all parameters can be used.</p>

<p>Unsupported parameters for ssh_config: AddressFamily, Tunnel, TunnelDevice, PermitLocalCommand, HashKnownHosts</p>

<p>Unsupported parameters for sshd_config: KerberosOrLocalPasswd, KerberosTicketCleanup, KerberosGetAFSToken, TCPKeepAlive, ShowPatchLevel, MaxSessions, PermitTunnel</p>

<h1 id="label-Parameters">Parameters</h1>

<p>A value of <code>undef</code> will use the defaults specified by the module. See <code>data/os/</code> for the actual default settings for supported operating systems.</p>

<p>Please keep in mind that this module does not include any sanity checks. Depending on the set parameters or values and the running version of SSH the resulting configuration could stop SSH from working.</p>

<p>See <a href="REFERENCE.md">REFERENCE.md</a> for a list of all parameters.</p>

<h1 id="label-Manage+user-27s+ssh_authorized_keys">Manage user&#39;s ssh_authorized_keys</h1>

<p>The hash ssh::keys is passed to ssh_authorized_key type. Because of this, you may specify any valid parameter for ssh_authorized_key. See the <a href="https://github.com/puppetlabs/puppetlabs-sshkeys_core/blob/main/REFERENCE.md#ssh_authorized_key">Type Reference</a> for a complete list.</p>

<h2 id="label-Sample+usage-3A">Sample usage:</h2>

<p>Push authorized key “root_for_userX” and remove key “root_for_userY” through Hiera.</p>

<pre class="code ruby"><code class="ruby">ssh::keys:
  root_for_userX:
    ensure: present
    user: root
    type: dsa
    key: AAAA...==
  apachehup:
    ensure: present
    user: apachehup
    type: rsa
    key: &#39;AAAA...==&#39;
    options: &#39;command=&quot;/sbin/service httpd restart&quot;&#39;
  root_for_userY:
    ensure: absent
    user: root
</code></pre>

<p>Manage config entries in a personal ssh/config file.</p>

<pre class="code ruby"><code class="ruby">Ssh::Config_entry {
  ensure =&gt; present,
  path   =&gt; &#39;/home/jenkins/.ssh/config&#39;,
  owner  =&gt; &#39;jenkins&#39;,
  group  =&gt; &#39;jenkins&#39;,
}


ssh::config_entry { &#39;jenkins *&#39;:
  host  =&gt; &#39;*&#39;,
  lines =&gt; [
    &#39;  ForwardX11 no&#39;,
    &#39;  StrictHostKeyChecking no&#39;,
  ],
  order =&gt; &#39;10&#39;,
}

ssh::config_entry { &#39;jenkins github.com&#39;:
  host  =&gt; &#39;github.com&#39;,
  lines =&gt; [&quot;  IdentityFile /home/jenkins/.ssh/jenkins-gihub.key&quot;],
  order =&gt; &#39;20&#39;,
}
</code></pre>

<h1 id="label-Manage+configurations+files+in+.d+directories">Manage configurations files in .d directories</h1>

<p>SSH supports configuration files in .d directories via the <code>include</code> directive. This module enables you to also manage these files. You need to set directives for the server (eg: /etc/ssh/sshd_config.d) and client (eg: /etc/ssh/ssh_config.d) part seperatly as they support different directives.</p>

<p>You can activate the management by ensuring <code>$include</code> is defined and pass a hash with the needed SSH directives and their values. Directives can be passed as hash via the <code>$ssh::config_files</code> and <code>$ssh::server::config_files</code> parameters. Directives passed as hash via <code>lines</code> will be checked for correct names and values. Directives passed as array via <code>custom</code> will not be checked and will be added to the configuration file. Similar to the main configuration files.</p>

<p>Different file permissions can be specified via <code>owner</code>, <code>group</code>, or <code>mode</code>. You can remove a file by setting <code>ensure</code> to <code>absent</code>.</p>

<h2 id="label-Sample+usage-3A">Sample usage:</h2>

<p>Manage the client configuration file /etc/ssh/ssh_config.d/50-redhat.conf with some directives and default file permissions (0644 root:root). <code>yaml ssh::include: /etc/ssh/ssh_config.d/*.conf ssh::config_files:   &#39;50-redhat&#39;:     lines:       Match: &#39;final all&#39;       Include: &#39;/etc/crypto-policies/back-ends/openssh.config&#39;       GSSAPIAuthentication: &#39;yes&#39;       ForwardX11Trusted: &#39;yes&#39; </code></p>

<p>Manage the server configuration file /etc/ssh/sshd_config.d/50-redhat.conf with some directives and default file permissions (0600 root:root). <code>yaml ssh::server::include: /etc/ssh/sshd_config.d/*.conf ssh::server::config_files:   &#39;50-redhat&#39;:     lines:       Include: &#39;/etc/crypto-policies/back-ends/opensshserver.config&#39;       SyslogFacility: &#39;AUTHPRIV&#39;       ChallengeResponseAuthentication: &#39;no&#39;       GSSAPIAuthentication: &#39;yes&#39;       GSSAPICleanupCredentials: &#39;no&#39;       UsePAM: &#39;yes&#39;       X11Forwarding: &#39;yes&#39;       PrintMotd: &#39;no&#39; </code> You can also specify different file permissions by setting $owner, $group, or $mode accordingly: <code>yaml ssh::include: /etc/ssh/ssh_config.d/*.conf ssh::config_files:   &#39;50-redhat&#39;:     owner: &#39;name&#39;     group: &#39;group&#39;     mode:  &#39;0664&#39;     lines:       Match: &#39;final all&#39;       GSSAPIAuthentication: &#39;yes&#39; </code> Using directives that are not supported by this module: <code>yaml ssh::include: /etc/ssh/ssh_config.d/*.conf ssh::config_files:   &#39;50-redhat&#39;:     custom:       - &#39;Directive1 Value1&#39;       - &#39;Directive2 Value2&#39; </code></p>

<p>Remove the file /etc/ssh/ssh_config.d/50-redhat.conf: <code>yaml ssh::include: /etc/ssh/ssh_config.d/*.conf ssh::config_files:   &#39;50-redhat&#39;:     ensure: &#39;absent&#39; </code></p>

<h2 id="label-Upgrading">Upgrading</h2>

<p>The SSH module v4 was completely rewritten. In this process all parameters for the SSH configuration files have been renamed. Users that want to upgrade need to change their running configuration. To make your upgrade easier there is a list of old and new parameter names. Consult <a href="UPGRADING.md">UPGRADING.md</a></p>

<h2 id="label-Contributing">Contributing</h2>

<p>Please check <a href="CONTRIBUTING.md">CONTRIBUTING.md</a></p>
</div></div>

      <div id="footer">
     Generated by <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>.
</div>

    </div>
  </body>
</html>